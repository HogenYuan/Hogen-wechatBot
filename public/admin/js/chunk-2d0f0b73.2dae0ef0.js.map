{"version":3,"sources":["webpack:///./src/views/config-categories/Index.vue?be87","webpack:///src/views/config-categories/Index.vue","webpack:///./src/views/config-categories/Index.vue?9133","webpack:///./src/views/config-categories/Index.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","search","on","$event","createDialog","_v","cates","x","scopedSlots","_u","key","fn","record","id","updateConfigCategory","model","value","callback","$$v","$set","expression","destroyConfigCategory","page","ref","form","errors","onStoreCategory","staticRenderFns","name","scroll","components","CacheConfig","QuickEdit","LzFormItem","LzForm","LzPopconfirm","PageContent","LzPagination","Space","SearchForm","data","slug","methods","watch","$route","immediate","newVal","$refs","onReset","component"],"mappings":"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","file":"js/chunk-2d0f0b73.2dae0ef0.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('page-content',[_c('space',{staticClass:\"my-1\"},[_c('search-form',{attrs:{\"fields\":_vm.search}}),_c('a-button',{on:{\"click\":function($event){_vm.createDialog = true}}},[_vm._v(\"添加\")]),_c('cache-config')],1),_c('a-table',{attrs:{\"row-key\":\"id\",\"data-source\":_vm.cates,\"bordered\":\"\",\"scroll\":{ x: 950 },\"pagination\":false}},[_c('a-table-column',{attrs:{\"title\":\"ID\",\"data-index\":\"id\",\"width\":60}}),_c('a-table-column',{attrs:{\"title\":\"名称\"},scopedSlots:_vm._u([{key:\"default\",fn:function(record){return [_c('quick-edit',{attrs:{\"id\":record.id,\"field\":\"name\",\"update\":_vm.updateConfigCategory},model:{value:(record.name),callback:function ($$v) {_vm.$set(record, \"name\", $$v)},expression:\"record.name\"}})]}}])}),_c('a-table-column',{attrs:{\"title\":\"标识\"},scopedSlots:_vm._u([{key:\"default\",fn:function(record){return [_c('quick-edit',{attrs:{\"id\":record.id,\"field\":\"slug\",\"update\":_vm.updateConfigCategory},model:{value:(record.slug),callback:function ($$v) {_vm.$set(record, \"slug\", $$v)},expression:\"record.slug\"}})]}}])}),_c('a-table-column',{attrs:{\"title\":\"添加时间\",\"data-index\":\"created_at\",\"width\":180}}),_c('a-table-column',{attrs:{\"title\":\"修改时间\",\"data-index\":\"updated_at\",\"width\":180}}),_c('a-table-column',{attrs:{\"title\":\"操作\",\"width\":200},scopedSlots:_vm._u([{key:\"default\",fn:function(record){return [_c('space',[_c('router-link',{attrs:{\"to\":(\"/configs/create?category_id=\" + (record.id))}},[_vm._v(\"添加配置\")]),_c('router-link',{attrs:{\"to\":(\"/configs?category_id=\" + (record.id))}},[_vm._v(\"查看配置\")]),_c('lz-popconfirm',{attrs:{\"confirm\":_vm.destroyConfigCategory(record.id)}},[_c('a',{staticClass:\"error-color\",attrs:{\"href\":\"javascript:void(0);\"}},[_vm._v(\"删除\")])])],1)]}}])})],1),_c('lz-pagination',{attrs:{\"page\":_vm.page}}),_c('a-modal',{attrs:{\"title\":\"添加分类\",\"footer\":null,\"width\":\"400px\"},model:{value:(_vm.createDialog),callback:function ($$v) {_vm.createDialog=$$v},expression:\"createDialog\"}},[_c('lz-form',{ref:\"form\",attrs:{\"disable-redirect\":\"\",\"form\":_vm.form,\"errors\":_vm.errors,\"submit\":_vm.onStoreCategory,\"in-dialog\":\"\",\"layout\":\"vertical\"},on:{\"update:form\":function($event){_vm.form=$event},\"update:errors\":function($event){_vm.errors=$event}}},[_c('lz-form-item',{attrs:{\"label\":\"名称\",\"required\":\"\",\"prop\":\"name\"}},[_c('a-input',{attrs:{\"focus\":\"\"},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}})],1),_c('lz-form-item',{attrs:{\"label\":\"标识\",\"required\":\"\",\"prop\":\"slug\"}},[_c('a-input',{model:{value:(_vm.form.slug),callback:function ($$v) {_vm.$set(_vm.form, \"slug\", $$v)},expression:\"form.slug\"}})],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <page-content>\r\n    <space class=\"my-1\">\r\n      <search-form :fields=\"search\"/>\r\n      <a-button @click=\"createDialog = true\">添加</a-button>\r\n      <cache-config/>\r\n    </space>\r\n\r\n    <a-table\r\n      row-key=\"id\"\r\n      :data-source=\"cates\"\r\n      bordered\r\n      :scroll=\"{ x: 950 }\"\r\n      :pagination=\"false\"\r\n    >\r\n      <a-table-column title=\"ID\" data-index=\"id\" :width=\"60\"/>\r\n      <a-table-column title=\"名称\">\r\n        <template #default=\"record\">\r\n          <quick-edit\r\n            :id=\"record.id\"\r\n            field=\"name\"\r\n            :update=\"updateConfigCategory\"\r\n            v-model=\"record.name\"\r\n          />\r\n        </template>\r\n      </a-table-column>\r\n      <a-table-column title=\"标识\">\r\n        <template #default=\"record\">\r\n          <quick-edit\r\n            :id=\"record.id\"\r\n            field=\"slug\"\r\n            :update=\"updateConfigCategory\"\r\n            v-model=\"record.slug\"\r\n          />\r\n        </template>\r\n      </a-table-column>\r\n      <a-table-column title=\"添加时间\" data-index=\"created_at\" :width=\"180\"/>\r\n      <a-table-column title=\"修改时间\" data-index=\"updated_at\" :width=\"180\"/>\r\n      <a-table-column title=\"操作\" :width=\"200\">\r\n        <template #default=\"record\">\r\n          <space>\r\n            <router-link :to=\"`/configs/create?category_id=${record.id}`\">添加配置</router-link>\r\n            <router-link :to=\"`/configs?category_id=${record.id}`\">查看配置</router-link>\r\n            <lz-popconfirm :confirm=\"destroyConfigCategory(record.id)\">\r\n              <a class=\"error-color\" href=\"javascript:void(0);\">删除</a>\r\n            </lz-popconfirm>\r\n          </space>\r\n        </template>\r\n      </a-table-column>\r\n    </a-table>\r\n    <lz-pagination :page=\"page\"/>\r\n\r\n    <a-modal\r\n      title=\"添加分类\"\r\n      v-model=\"createDialog\"\r\n      :footer=\"null\"\r\n      width=\"400px\"\r\n    >\r\n      <lz-form\r\n        ref=\"form\"\r\n        disable-redirect\r\n        :form.sync=\"form\"\r\n        :errors.sync=\"errors\"\r\n        :submit=\"onStoreCategory\"\r\n        in-dialog\r\n        layout=\"vertical\"\r\n      >\r\n        <lz-form-item label=\"名称\" required prop=\"name\">\r\n          <a-input v-model=\"form.name\" focus/>\r\n        </lz-form-item>\r\n        <lz-form-item label=\"标识\" required prop=\"slug\">\r\n          <a-input v-model=\"form.slug\"/>\r\n        </lz-form-item>\r\n      </lz-form>\r\n    </a-modal>\r\n  </page-content>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  getConfigCategories,\r\n  storeConfigCategory,\r\n  updateConfigCategory,\r\n  destroyConfigCategory,\r\n} from '@/api/configs'\r\nimport Space from '@c/Space'\r\nimport LzPagination from '@c/LzPagination'\r\nimport PageContent from '@c/PageContent'\r\nimport SearchForm from '@c/SearchForm'\r\nimport LzPopconfirm from '@c/LzPopconfirm'\r\nimport { removeWhile } from '@/libs/utils'\r\nimport LzForm from '@c/LzForm/index'\r\nimport LzFormItem from '@c/LzForm/LzFormItem'\r\nimport QuickEdit from '@c/QuickEdit'\r\nimport CacheConfig from '@v/configs/components/CacheConfig'\r\n\r\nexport default {\r\n  name: 'Index',\r\n  scroll: true,\r\n  components: {\r\n    CacheConfig,\r\n    QuickEdit,\r\n    LzFormItem,\r\n    LzForm,\r\n    LzPopconfirm,\r\n    PageContent,\r\n    LzPagination,\r\n    Space,\r\n    SearchForm,\r\n  },\r\n  data() {\r\n    return {\r\n      cates: [],\r\n      page: null,\r\n\r\n      search: [\r\n        {\r\n          field: 'name',\r\n          label: '名称',\r\n        },\r\n        {\r\n          field: 'slug',\r\n          label: '标识',\r\n        },\r\n      ],\r\n\r\n      createDialog: false,\r\n\r\n      form: {\r\n        name: '',\r\n        slug: '',\r\n      },\r\n      errors: {},\r\n    }\r\n  },\r\n  methods: {\r\n    destroyConfigCategory(id) {\r\n      return async () => {\r\n        await destroyConfigCategory(id)\r\n        this.cates = removeWhile(this.cates, (i) => i.id === id)\r\n      }\r\n    },\r\n    async onStoreCategory($form) {\r\n      const { data } = await storeConfigCategory(this.form)\r\n\r\n      this.cates.unshift(data)\r\n\r\n      if ($form.stay) {\r\n        $form.onReset()\r\n      } else {\r\n        this.createDialog = false\r\n      }\r\n    },\r\n    updateConfigCategory,\r\n  },\r\n  watch: {\r\n    $route: {\r\n      async handler(newVal) {\r\n        const { data: { data, meta } } = await getConfigCategories(newVal.query)\r\n        this.cates = data\r\n        this.page = meta\r\n\r\n        this.$scrollResolve()\r\n      },\r\n      immediate: true,\r\n    },\r\n    createDialog(newVal) {\r\n      if (!newVal) {\r\n        this.$refs.form.onReset()\r\n      }\r\n    },\r\n  },\r\n}\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Index.vue?vue&type=template&id=62a98c44&\"\nimport script from \"./Index.vue?vue&type=script&lang=js&\"\nexport * from \"./Index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}